"use strict";var cartList=JSON.parse(localStorage.getItem("cartList")),newCartList=JSON.parse(localStorage.getItem("cartList"));function bindHtml(){var t=cartList.every(function(t){return!0===t.isSelect}),c='\n        <div class="top">\n          <input class="selectAll" type="checkbox" '.concat(t?"checked":"",'>   全选\n        </div>\n        <ul class="center">\n      ');cartList.forEach(function(t){c+='\n          <li>\n            <div class="select">\n              <input data-id='.concat(t.list_id,' class="selectOne" type="checkbox" ').concat(t.isSelect?"checked":"",' >\n            </div>\n            <div class="info">\n              <div class="cart-product-img">\n              <img src="').concat(t.list_url,'" alt="" class="cart-product-img-item">\n              </div>\n              <div class="cart-product-name">\n              <p>').concat(t.list_name,'</p>\n              </div>\n            </div>\n            <p class="price">￥').concat(t.list_price,'</p>\n            <div class="number">\n              <button class="sub" data-id=').concat(t.list_id,'>-</button>\n              <input type="text" value="').concat(t.number,'" class="cart-product-numbers">\n              <button class="add" data-id=').concat(t.list_id,'>+</button>\n            </div>\n            <p class="subtotal">￥').concat(t.subtotal.toFixed(2),'</p>\n            <div class="del" data-id=').concat(t.list_id,'">删除</div>\n          </li>\n        ')});var n=cartList.filter(function(t){return t.isSelect}),i=0,a=0;n.forEach(function(t){i+=t.number,a+=t.subtotal}),c+='\n        </ul>\n        <div class="bottom">\n          <p class="select-num">选中商品数量:  <span class="select-num-p">'.concat(i,'</span></p>\n          <p class="fee-total">总价： <span class="count-price">￥').concat(a.toFixed(2),'</span></p>\n          <button class="clear">清空购物车</button>\n          <button class="pay" ').concat(n.length?"":"disabled","> 去结算 ></button>\n        </div>\n      "),$(".cart").html(c)}function bindEvent(){$(".cart").on("change",".selectAll",function(){var c=this;cartList.forEach(function(t){t.isSelect=c.checked}),bindHtml(),localStorage.setItem("cartList",JSON.stringify(cartList))}),$(".cart").on("change",".selectOne",function(){var c=$(this).data("id");cartList.forEach(function(t){t.list_id===c&&(t.isSelect=!t.isSelect)}),bindHtml(),localStorage.setItem("cartList",JSON.stringify(cartList))}),$(".cart").on("click",".sub",function(){var c=$(this).data("id");cartList.forEach(function(t){t.list_id===c&&(1<t.number&&t.number--,t.subtotal=t.list_price*t.number)}),bindHtml(),localStorage.setItem("cartList",JSON.stringify(cartList))}),$(".cart").on("click",".add",function(){var c=$(this).data("id");cartList.forEach(function(t){t.list_id===c&&(t.number++,t.subtotal=t.number*t.list_price)}),bindHtml(),localStorage.setItem("cartList",JSON.stringify(cartList))}),$(".cart").on("click",".del",function(){var c=$(this).data("id"),t=cartList.filter(function(t){return t.list_id!==c});cartList=t,console.log(cartList),console.log(t),bindHtml(),localStorage.setItem("cartList",JSON.stringify(cartList))}),$(".cart").on("click",".clear",function(){cartList=[],bindHtml(),localStorage.setItem("cartList",JSON.stringify(cartList))})}cartList?(bindHtml(),bindEvent()):alert("购物车空空如也");